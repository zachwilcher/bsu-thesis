\chapter{Surfaces}
\(\Gamma\) is assumed to be a simple connected graph.
% TODO mention that the graph Gamma is also suitably subdivided.
Abrams showed in \cite{abrams2000configurationspaces} that \(\DConf_2(\Gamma)\) is a surface if and only if \(\Gamma\) is \(K_5\) or \(K_{3,3}\).
He also showed that \(\DConf_3(K_5)\) and \(\DConf_4{K_{3,3}}\) are surfaces.
In \cite{appiah2024algebraicstructurehyperbolicgraph} it was demonstrated that \(\DConf_3(\Theta_4)\) is a closed, orientable surface.
The goal of this chapter is to demonstrate that these are the only examples.

\begin{lem}
\label{lem:is_surface_0}
If \(\DConf_n(\Gamma)\) is a surface, then \(\Gamma\) has at least \(n+2\) vertices.
\end{lem}
\begin{proof}
    We proceed by cases on the number of vertices in \(\Gamma\):
    \begin{enumerate}
    \item If \(\Gamma\) has less than \(n\) vertices then, \(\DConf_n(\Gamma)\) is empty.
    \item If \(\Gamma\) has \(n\) vertices, then \(\DConf_n(\Gamma)\) is just a single point.
    \item If \(\Gamma\) has \(n + 1\) vertices, then in any configuration of \(n\) particles on \(\Gamma\), there is 
    exactly one empty vertex. Since \(\Gamma\) is connected, at least one of these particles will be able to move to the empty vertex.
    However, at most one particle will be able to move into this empty vertex. Therefore, the configuration space
    consists only of \(1\)-cubes which is not homeomorphic to a surface.
    \end{enumerate}
\end{proof}

\begin{figure}
    \centering
    \begin{tikzpicture}
        \node (v1) at (0,2) {\(v_1\)};
        \node (w1) at (0,0) {\(w_1\)};
        \draw (v1) -- (w1);
        \node (vi) at (3, 2) {\(v_i\)};
        \node (w2) at (4, 0) {\(w_2\)};
        \node (w3) at (2, 0) {\(w_3\)};
        \draw (vi) -- (w2);
        \draw (vi) -- (w3);
    \end{tikzpicture}
    \quad\quad
    \begin{tikzpicture}
        \node (v1) at (0,2) {\(v_1\)};
        \node (w1) at (0,0) {\(w_1\)};
        \draw (v1) -- (w1);
        \node (vi) at (2, 2) {\(v_i\)};
        \node (vj) at (4, 2) {\(v_j\)};
        \node (w2) at (3, 0) {\(w_2\)};
        \draw (vi) -- (w2);
        \draw (vj) -- (w2);
    \end{tikzpicture}
    \caption{Lemma \ref{lem:is_surface_1} possibilities}
    \label{fig:lem:is_surface_1_possibilities}
\end{figure}

\begin{lem}
    \label{lem:is_surface_1}
    Suppose \(\DConf_n(\Gamma)\) is a surface and let \(v_1\) and \(w_1\) be adjacent vertices in \(\Gamma\).
    For any collection of \(n-1\) vertices \(\{v_2, \cdots, v_n\}\) in \(\Gamma - \{v_1, w_1\}\) there exists exactly two edges \(e_1 = v_i w_2\) and \(v_j w_3\)
    such that \(v_i, v_j \in \{v_2, \cdots, v_n\}\), \(w_2, w_3 \not \in \{v_2, \cdots, v_n\}\) where exactly one of the following hold:
    \begin{enumerate}
        \item \(v_i = v_j\) and \(w_2 \neq w_3\)
        \item \(w_2 = w_3\) and \(v_i \neq v_j\)
    \end{enumerate}
\end{lem}
\begin{proof}
    Let \(v_2, \cdots, v_n\) be \(n-1\) vertices in \(\Gamma - \{v_1, w_1\}\).   
    Now, put a particle at each of the vertices \(v_1, \cdots, v_n\).
    Since no particle exists at \(w_1\) and \(v_1\) is adjacent to \(w_1\), 
    the particle at \(v_1\) can travel from \(v_1\) to \(w_1\).
    This particles movement corresponds to a \(1\)-cube in \(\DConf_n(\Gamma)\).
    % TODO cite something showing every 1-cell in the (discretized) configuration space is in one-to-one correspondence with edges in \Gamma
    Since the configuration space is a surface, this \(1\)-cube must border exactly two distinct \(2\)-cubes.
    For this \(1\)-cube to border any other \(2\)-cube,
    there must be another particle at one of the vertices \(v_i\) in \(\{v_2, \ldots, v_n\}\) that can move to some vertex
    \(w_2 \not \in \{v_2, \ldots, v_n\}\).
    Since the \(1\)-cube needs to border two \(2\)-cubes, the movement from \(v_i\) to \(w_2\) cannot be the only other movement in addition to
    the movement from \(v_1\) to \(w_1\). Let \(v_j\) and \(w_3\) be the vertices corresponding to this movement.
    
    Notice that if \(v_i \neq v_j\) and \(w_2 \neq w_3\), then as the particle at \(v_1\) travels to \(w_1\), the particles
    at \(v_i\) and \(v_j\) can simultaneously travel to \(w_2\) and \(w_3\) respectively. These three simultaneous movements correspond
    to a \(3\)-cube in \(\DConf_n(\Gamma)\) with the point \((v_1, \cdots, v_n)\) as a corner.
    Since \(\DConf_n(\Gamma)\) is assumed to be a surface and \(e_1\) and \(e_2\) are distinct, 
    the result follows.
\end{proof}

\begin{lem}
    \label{lem:is_surface_2}
    Suppose \(\DConf_n(\Gamma)\) is a surface and let \(v_1\) and \(w_1\) be adjacent vertices in \(\Gamma\).
    Let \(\{v_2, \cdots, v_n\}\) be a collection of \(n-1\) vertices in \(\Gamma - \{v_1, w_1\}\) 
    and \(e_1 = v_i w_2\), \(e_2 = v_j w_3\) be the edges guaranteed
    from applying Lemma \ref{lem:is_surface_1} to \(\{v_2, \cdots, v_n\}\) in \(\Gamma - \{v_1, w_1\}\).
    Then, exactly one of the following are true.
    \begin{enumerate}
        \item \(e_1\) and \(e_2\) belong to a cycle with one vertex not in \(\{v_2, \cdots, v_n\}\).
        \item \(n = 3\) and these edges belong to a \(Y\)-graph in \(\Gamma - \{v_1, w_1\}\) with two vertices not in \(\{v_2, \cdots, v_n\}\).
    \end{enumerate}
\end{lem}
\begin{proof}
    The argument proceeds by cases on the possibilities for the edges \(e_1\) and \(e_2\).
    
    \textbf{Case 1:} \(v_i = v_j\).
    In this case, \(e_1 = v_i w_2\) and \(e_2 = v_i w_3\). Let \(v_k\) be some vertex in \(\{v_2, \cdots, v_n\}\setminus\{v_i\}\).
    Applying Lemma \ref{lem:is_surface_1} to \(\{w_2, v_2, \cdots, v_n\}\setminus\{v_k\}\) in \(\Gamma - \{v_1, w_1\}\),
    we obtain two new edges \(e_3\) and \(e_4\).
    Since \(e_2\) already connects \(v_i\) to \(w_3\), one of \(e_3\) or \(e_4\) is \(e_2\). See Figure \ref{fig:lem:is_surface_2_1}.
    \begin{figure}
        \centering
        \begin{tikzpicture}
            \node (v1) at (0,2) {\(v_1\)};
            \node (w1) at (0,0) {\(w_1\)};
            \draw (v1) -- (w1);
            \node (vi) at (3, 2) {\(v_i\)};
            \node (w2) at (2, 0) {\(w_2\)};
            \node (w3) at (4, 0) {\(w_3\)};
            \draw (vi) -- (w2);
            \draw (vi) -- (w3);
            
            \node (vk) at (5, 2) {\(v_k\)};
            \draw (vi) -- (vk);
        \end{tikzpicture}
        \quad\quad
        \begin{tikzpicture}
            \node (v1) at (0,2) {\(v_1\)};
            \node (w1) at (0,0) {\(w_1\)};
            \draw (v1) -- (w1);
            \node (vi) at (3, 2) {\(v_i\)};
            \node (w2) at (2, 0) {\(w_2\)};
            \node (w3) at (4, 0) {\(w_3\)};
            \draw (vi) -- (w2);
            \draw (vi) -- (w3);
            \draw (w2) -- (w3);
            
        \end{tikzpicture}
        \caption{Possibilities if \(v_i = v_j\)}
        \label{fig:lem:is_surface_2_1}
    \end{figure}
    Without a loss of generality suppose \(e_4 = e_2\).
    So, \(e_3\) has either \(v_i\) as an endpoint or \(w_3\) as an endpoint.
    Notice \(e_1\) and \(e_2\) are the only edges connecting a vertex in \(\{v_2, \cdots, v_n\}\) to \(w_3\),
    So, if \(e_3\) has \(v_i\) as an endpoint, then \(v_k\) must be the other endpoint (\(Y\)-graph).
    Moreover, since \(v_k\) was arbitrary every vertex in \(\{v_2, \cdots, v_n\}\setminus\{v_i\}\) is adjacent to \(v_i\).
    So, if \(n > 3\) then there are two vertices \(v_k\) and \(v_r\) in the set \(\{v_2, \cdots, v_n\}\) distinct but adjacent to \(v_i\).
    Put particles at each vertex in the set \(\{w_2, v_1, \cdots, v_n\}\setminus\{v_i\}\).
    As the particle at \(v_1\) moves to \(w_1\), any one particle in the set \(\{w_2, v_k, v_r\}\) can move to \(v_i\).
    These particles movements result in a book in the configuration space whose spine corresponds to the movement of the particle at \(v_1\) to \(w_1\).
    Otherwise, if \(e_3\) has \(w_3\) as an endpoint, then \(w_2\) must be the other endpoint since 
    \(w_2\) cannot connect to any of the vertices in \(\{v_2,\cdots, v_n\}\) in \(\Gamma - \{v_1, w_1\}\) as per Lemma \ref{lem:is_surface_0}.
    This puts \(e_1\) and \(e_2\) on a \(3\)-cycle.

    \textbf{Case 2:} \(v_i \neq v_j\).
    In this case, \(e_1 = v_i w_2\) and \(e_2 = v_j w_2\).
    Applying Lemma \ref{lem:is_surface_1} to \(\{w_2, v_2, \cdots, v_n\}\setminus\{v_j\}\) in \(\Gamma - \{v_1, w_1\}\),
    we again obtain two edges \(e_3\) and \(e_4\).
    Since \(e_2\) already connects \(v_j\) to \(w_2\), one of \(e_3\) or \(e_4\) is \(e_2\).
    Without a loss of generality suppose \(e_4 = e_2\).
    So, \(e_3\) has either \(v_j\) or \(w_2\) as an endpoint (see Figure \ref{fig:lem:is_surface_2_2}).
    \begin{figure}[h!]
        \centering
        \begin{tikzpicture}
            \node (v1) at (0,2) {\(v_1\)};
            \node (w1) at (0,0) {\(w_1\)};
            \draw (v1) -- (w1);
            \node (vi) at (2, 2) {\(v_i\)};
            \node (vj) at (4, 2) {\(v_j\)};
            \node (w2) at (3, 0) {\(w_2\)};
            \draw (vi) -- (w2);
            \draw (vj) -- (w2);

            \node (u) at (5, 0) {\(u\)};
            \draw (w2) -- (u);
        \end{tikzpicture}
        \quad\quad
        \begin{tikzpicture}
            \node (v1) at (0,2) {\(v_1\)};
            \node (w1) at (0,0) {\(w_1\)};
            \draw (v1) -- (w1);
            \node (vi) at (2, 1) {\(v_i\)};
            \node (vj) at (4, 1) {\(v_j\)};
            \node (w2) at (3, 0) {\(w_2\)};
            \draw (vi) -- (w2);
            \draw (vj) -- (w2);

            \node (vk) at (3, 2) {\(v_k\)};
            \draw (vk) -- (vj);
        \end{tikzpicture}
        \caption{Possibilities if \(v_i \neq v_j\)}
        \label{fig:lem:is_surface_2_2}
    \end{figure}
    Notice \(e_1\) and \(e_2\) are the only edges connecting a vertex in \(\{v_2, \cdots, v_n\}\) to \(w_2\).
    So, if \(e_3\) has \(w_2\) as endpoint, then \(e_3\) must connect \(w_2\) to some vertex \(u\) in \(\Gamma - \{v_1, w_1\}\) outside the set \(\{v_2, \cdots, v_n\}\).
    Notice that if \(n > 3\) there exists some \(v_k\) in \(\{v_2, \cdots, v_n\}\) distinct from \(v_i\) and \(v_j\). Put 
    particles at the vertices \(\{u, v_1, \cdots, v_n\}\setminus\{v_k\}\). As the particle at \(v_1\) moves to \(w_1\),
    any one particle in the set \(\{v_i, v_j, u\}\) can move to \(w_2\). These particles movements results in a book
    in the configuration space whose spine corresponds to the movement of the particle at \(v_1\) to \(w_1\). So, \(n\) must equal \(3\)
    if \(e_3\) has \(w_2\) as an endpoint.
    Otherwise, if \(e_3\) has \(v_j\) as an endpoint, then \(e_3\) must connect \(v_j\) to some vertex \(v_k\) in the set \(\{v_2, \cdots, v_n\}\).

    It remains to show that the vertices in \(\{v_i, w_2, v_j, v_k\}\) belong to a cycle.
    Relabel the vertices in \(\Gamma - \{v_1, w_1\}\) such that \(v_i = u_1, w_2 = u_2, v_j = u_3, v_k = u_4\) (see Figure \ref{fig:lem:is_surface_2_3}).
    \begin{figure}
        \centering
        \begin{tikzpicture}
            \node (v1) at (0,2) {\(v_1\)};
            \node (w1) at (0,0) {\(w_1\)};
            \draw (v1) -- (w1);

            \node (u1) at (2, 1) {\(u_1\)};
            \node (u2) at (3, 0) {\(u_2\)};
            \node (u3) at (4, 1) {\(u_3\)};
            \node (u4) at (3, 2) {\(u_4\)};
            \draw (u1) -- (u2);
            \draw (u2) -- (u3);
            \draw (u3) -- (u4);
            \draw[thick, dotted] (u4) -- (u1);
        \end{tikzpicture}
        \caption{Partial cycle if \(v_i \neq v_j\) and \(e_3\) has \(v_j\) as an endpoint.}
        \label{fig:lem:is_surface_2_3}
    \end{figure}
    We now construct the cycle inductively.
    Suppose \(u_{i - 1}\) is adjacent to \(u_{i - 2}\) and \(u_i\) for some \(i > 3\).
    Apply Lemma \ref{lem:is_surface_1} to \(\{w_2, v_2, \cdots, v_n\}\setminus\{u_i\}\) in \(\Gamma - \{v_1, w_1\}\) and obtain
    two edges \(e\) and \(e'\).
    Since \(u_i\) is already adjacent to \(u_{i-1}\) one of \(e\) or \(e'\) must
    be the edge \(u_i u_{i -1}\).
    Without a loss of generality suppose \(e' = u_i u_{i-1}\).
    Then, one of the endpoints of \(e\) is \(u_i\) or \(u_{i-1}\).
    If \(e\) has \(u_{i-1}\) as an endpoint there exists
    some vertex \(w\) outside of \(\{w_2, v_2, \cdots, v_n\}\) where \(e = u_{i-1} w\).
    Put particles at each vertex in the set \(\{v_1, w, w_2, v_2, \cdots, v_n\}\setminus\{u_{i-2}, u_i\}\).
    As the particle at \(v_1\) travels to \(w_1\),
    the particle at \(u_{i-3}\) can travel to \(u_{i-2}\) simultaneously as the particle
    at \(u_{i-1}\) can travel to \(u_i\).
    These particles movements result in a \(3\)-cube in the configuration space.
    So, \(e\) must have endpoints \(u_i\) and \(u_{i+1}\) where \(u_{i+1}\) is some vertex in \(\{w_2, v_2, \cdots, v_n\}\setminus\{u_i\}\).
    % connect from the previous statement to this better
    Since each \(u_i\) belongs to the finite set \(\{w_2, v_2, \cdots, v_n\}\),
    there must some \(u_m\) such that \(u_i = u_{m+1}\) and \(i < m\).
    If \(i \neq 1\), then if we place particles on the vertices
    \(\{v_1, w_2, v_2, \cdots, v_n\}\setminus \{u_i\}\), as the particle at \(v_1\) moves to \(w_1\),
    the particle at \(u_{i - 1}\), \(u_m\), or \(u_{i + 1}\) can travel to \(u_i\).
    These movements result in a book in the configuration space whose spine corresponds to the movement of the particle at \(v_1\) to \(w_1\).
    Therefore \(\{u_1, u_2, \cdots, u_m\}\) forms an \(m\)-cycle for some \(3 \le m \le n\).
\end{proof}

\begin{lem}
\label{lem:is_surface_C}
Let \(v_1\) and \(w_1\) be adjacent vertices in \(\Gamma\) and suppose \(n \ge 3\).
If \(\DConf_n(\Gamma)\) is a surface and \(\Gamma - \{v_1, w_1\}\) contains a cycle \(C\),
then \(C\) is an \(n\)-cycle and \(\Gamma - \{v_1, w_1\} = C\). 
\end{lem}
\begin{proof}
Suppose \(\DConf_n(\Gamma)\) is a surface and \(\Gamma - \{v_1, w_1\}\) has a cycle \(C\).
Since \(\Gamma\) has at least \(n + 2\) vertices and is simple, 
\(\Gamma - \{v_1, w_1\}\) has at least \(n\) vertices and \(C\) is at least a \(3\)-cycle.
Suppose that \(C\) has \(m > n\) vertices and let \(v_2, \cdots, v_n\) be \(n-1\) vertices in a path on \(C\).
Let \(w_2\) and \(w_3\) be the vertices adjacent to \(v_2\) and \(v_n\).
Since \(m \ge n + 1\), we have that \(w_2 \neq w_3\) and \(v_2 \neq v_n\).
The edges \(v_2 w_2\) and \(v_n w_3\) contradict the result of Lemma \ref{lem:is_surface_1}.
So, \(C\) has at most \(n\) vertices.

Suppose instead that \(C\) has \(m < n\) vertices, then \(n > 3\) and there exists at least \(n - m\) vertices in \(\Gamma - \{v_1, w_1\}\) but not on \(C\).
Let \(v_2, \cdots, v_n\) be \(n - 1\) vertices in \(\Gamma - \{v_1, w_1\}\) such that \(v_2, \cdots, v_{m + 1}\) are on \(C\) and
\(v_{m + 2}, \cdots, v_n\) are not. i.e. fill up the cycle with the first \(m\) vertices.
Applying Lemma \ref{lem:is_surface_1} to \(\{v_2, \cdots, v_n\}\) in \(\Gamma - \{v_1, w_1\}\), we obtain two edges \(e_1 = v_i w_2\) and \(e_2 = v_j w_3\).
Suppose \(v_i\) or \(v_j\) are on \(C\). Without a loss of generality assume \(v_i\) is on \(C\) and
put particles on the vertices in \(\{w_2, v_1, \cdots, v_n\}\setminus\{v_i\}\).
As the particle at \(v_1\) travels to \(w_1\), there are three particles that can move to \(v_i\): the particle at \(w_2\) and the two
particles at the vertices on \(C\) which are adjacent to \(v_i\).
These particles movements result in a book in the configuration space whose spine corresponds to the movement of the particle at \(v_1\) to \(w_1\).
Since a surface cannot contain a book, \(v_i\) and \(v_j\) cannot be on \(C\).
So, assume that \(v_i\) and \(v_j\) are both not on \(C\).
Since \(w_2\) and \(w_3\) must not belong to the set \(\{v_2, \cdots, v_n\}\) and \(\{v_1, \cdots, v_m\}\) are on \(C\),
\(w_2\) and \(w_3\) are not on \(C\).
Since \(n > 3\), Lemma \ref{lem:is_surface_2} guarantees that \(e_1\) and \(e_2\) belong to a cycle \(C'\) that has one vertex \(u\) not in
the set \(\{w_2, v_2, \cdots, v_n\}\).

We claim that there cannot be any edge \(e = u_1 u_2\) such that \(u_1\) is on \(\Gamma - \{v_1, w_1\} - C'\) and \(u_2\) is on \(C'\).
To see this suppose there did exist such an edge \(e\).
Now put \(n\) particles on \(\Gamma\) so that one particle is on \(v_1\), \(1\) particle is on \(u_1\), \(2\) particles are on \(C' - u_2\), 
and \(n - 3\) particles are on \(\Gamma - \{v_1, w_1\} - C' - u_1\).
As the particle at \(v_1\) moves to \(w_1\), the particle at \(u_1\) can move to \(u_2\) or the one of the two particles on \(C'\) can move to \(u_2\).
These particles movements result in a book in the configuration space whose spine corresponds to the movement of the particle at \(v_1\) to \(w_1\).
Since \(\Gamma\) is connected but \(C'\) is not connected to any vertex in \(\Gamma - \{v_1, w_1\} - C'\),
there must exist at least one edge connecting an endpoint of \(v_1 w_1\) to \(C'\).
Suppose \(e = u_1 u_2\) is such an edge where \(u_1\) is on \(v_1 w_1\) and \(u_2\) is on \(C'\).
Put \(n\) particles on \(\Gamma\) so that \(2\) particles are on each endpoint of \(v_1 w_1\), \(2\) particles are on \(C' - u_2\), \(m - 1\) particles are on \(C\),
and \(n - m - 3\) particles are on \(\Gamma - \{v_1, w_1\} - C'\).
Since \(C\) is an \(m\)-cycle and there are only \(m - 1\) particles on it, there exists one particle on \(C\) that can move to another vertex on \(C\).
As this particle moves, the particle at \(u_1\) or one of the two on \(C' - u_2\) can move to \(u_2\).
These particles movements again result in a book whose spine corresponds to the movement of the particle on \(C\).
Since surfaces do not contain books, \(C\) must be an \(n\)-cycle.

To see that \(C\) must equal \(\Gamma - \{v_1, w_1\}\) suppose there exists some vertex \(u\) in \(\Gamma - \{v_1, w_1\} - C\).
Since \(C\) is an \(n\)-cycle, \(\Gamma - \{v_1, w_1\}\) has at least \(n + 1\) vertices.
Put particles on \(\Gamma\) so that \(1\) particle is at \(v_1\), \(1\) particle is at \(u\) and \(n-2\) particles are on a path in \(C\).
As seen in the argument for why \(C\) cannot have more than \(n\) vertices, these particles movements correspond to a \(3\)-cube in the configuration
space. Hence \(\Gamma - \{v_1, w_1\}\) must be an \(n\)-cycle.
\end{proof}

\begin{lem}
\label{lem:is_surface_Y}
Let \(v_1\) and \(w_1\) be adjacent vertices in \(\Gamma\) and suppose \(n \ge 3\).
If \(\DConf_n(\Gamma)\) is a surface and \(\Gamma - \{v_1, w_1\}\) does not contain a cycle, then \(\Gamma - \{v_1, w_1\}\) is the \(Y\)-graph.
\end{lem}
\begin{proof}
Suppose that \(\Gamma - \{v_1, w_1\}\) does not contain a cycle.
Since \(\Gamma - \{v_1, w_1\}\) contains at least \(n - 1\) vertices: \(v_2, \cdots, v_n\), 
we can apply Lemma \ref{lem:is_surface_1} to \(v_2, \cdots, v_n\) in \(\Gamma - \{v_1, w_1\}\).
Doing this, we obtain two edges \(e_1 = v_i w_2\) and \(e_2 = v_j w_3\).
Since \(\Gamma - \{v_1, w_1\}\) does not contain a cycle, Lemma \ref{lem:is_surface_2} guarantees that
\(e_1\) and \(e_2\) belong to a \(Y\)-graph \(H\).

It remains to show that there can not exist any other vertices in \(\Gamma - \{v_1, w_1\}\) other than those in \(H\).
Suppose there exists some vertex \(v_k\) in \(\Gamma - \{v_1, w_1\} - H\) and let \(u\) be some vertex in \(H\) but not in \(\{v_2, \cdots, v_n\}\).
Let \(x\) be the vertex in \(H\) that is incident to \(3\) edges.
Now, put 1 particle at \(v_1\), \(3\) particles at vertices in \(H \setminus \{x\}\),
and \(n-4\) particles at vertices in the set \(\{v_2, \cdots, v_n\}\setminus H\).
As the particle at \(v_1\) moves to \(w_1\),
three particles in \(H\) can move to \(x\).
These particles movements result in a book in the configuration space whose spine
corresponds to the movement of the particle at \(v_1\) to \(w_1\).
Therefore, \(\Gamma - \{v_1, w_1\} = H\).
\end{proof}

% t ~ at top of page, h! ~ try to put it here
\begin{figure}[h!]
    \centering
\begin{tikzpicture}
    \node (v1) at (0, 2) {\(v_1\)};
    \node (v2) at (0, 0) {\(v_2\)};
    \draw (v1) -- (v2);
    \node (u1) at (2, 2) {\(u_1\)};
    \node (u2) at (4, 2) {\(u_2\)};
    \node (u3) at (3, 1) {\(u_3\)};
    \node (u4) at (3, 0) {\(u_4\)};
    \draw (u1) -- (u3);
    \draw (u2) -- (u3);
    \draw (u4) -- (u3);
    \draw (v1) -- (u3);
    \draw (v2) -- (u1);
    \draw (v2) -- (u2);
    \draw (v2) -- (u4);
\end{tikzpicture}
\caption{\(\Theta_4\)}
\label{fig:Theta_4}
\end{figure}

\begin{thm}
    If \(\DConf_3(\Gamma)\) is a surface then \(\Gamma\) is either \(K_5\) or the \(\Theta_4\) graph.
\end{thm}
\begin{proof}
    Let \(v_1\) and \(v_2\) be adjacent vertices in \(\Gamma\).
    First, suppose \(\Gamma - \{v_1, v_2\}\) is a \(3\)-cycle, then \(\Gamma\) has \(5\) vertices.
    If \(\Gamma\) is not \(K_5\) then there are two vertices: \(v_i\), and \(u_1\) in \(\Gamma - \{v_1, v_2\}\)
    such that they are not connected by an edge in \(\Gamma\).
    Let \(u_2\) and \(u_3\) be the other two vertices in \(\Gamma - \{v_1, v_2\}\).
    Notice that \(\Gamma - \{u_2, u_3\}\) cannot be either a \(3\)-cycle nor a \(Y\)-graph.

    Suppose instead that \(\Gamma - v_1 v_2\) is a \(Y\)-graph, then \(\Gamma\) has \(6\) vertices.
    Since \(\Gamma\) is connected there exists at least one edge in \(\Gamma\) connecting \(v_1 v_2\) to \(\Gamma - v_1 v_2\).
    We then have one of the following in Figure \ref{fig:edgeygraphconnections}.
    \begin{figure}
        \centering
        \begin{tikzpicture}
            \node (v1) at (0, 2) {\(v_1\)};
            \node (v2) at (0, 0) {\(v_2\)};
            \draw (v1) -- (v2);
            \node (u1) at (2, 2) {\(u_1\)};
            \node (u2) at (4, 2) {\(u_2\)};
            \node (u3) at (3, 1) {\(u_3\)};
            \node (u4) at (3, 0) {\(u_4\)};
            \draw (u1) -- (u3);
            \draw (u2) -- (u3);
            \draw (u4) -- (u3);
            \draw (v1) -- (u1);
        \end{tikzpicture}
        \quad
        \begin{tikzpicture}
            \node (v1) at (0, 2) {\(v_1\)};
            \node (v2) at (0, 0) {\(v_2\)};
            \draw (v1) -- (v2);
            \node (u1) at (2, 2) {\(u_1\)};
            \node (u2) at (4, 2) {\(u_2\)};
            \node (u3) at (3, 1) {\(u_3\)};
            \node (u4) at (3, 0) {\(u_4\)};
            \draw (u1) -- (u3);
            \draw (u2) -- (u3);
            \draw (u4) -- (u3);
            \draw (v1) -- (u3);
        \end{tikzpicture}
        \caption{Possible ways to connect an edge to a \(Y\)-graph}
        \label{fig:edgeygraphconnections}
    \end{figure}

    Suppose that there is an edge in \(\Gamma\) between \(v_1\) and \(u_1\).
    Applying Lemma \ref{lem:is_surface_Y} to \(\Gamma - \{u_3, u_4\}\), we see there must be an edge
    connecting \(v_1\) and \(u_2\) in \(\Gamma\).
    Applying Lemma \ref{lem:is_surface_Y} to \(\Gamma - \{u_1, u_3\}\), there must be an edge between
    \(v_1\) and \(u_4\) in \(Gamma\).
    Finally, applying Lemma \ref{lem:is_surface_Y} to \(\Gamma - \{v_1, u_1\}\), there must must be
    an edge between \(v_2\) and \(u_2\).
    So in this case, \(\Gamma\) must have \(\Theta_4\) as a subgraph.

    Suppose instead that there is an edge in \(\Gamma\) between \(v_1\) and \(u_3\).
    Applying Lemma \ref{lem:is_surface_Y} to \(\Gamma - \{u_3, u_4\}\),
    we have two subcases.
    \begin{enumerate}
        \item There are edges \(v_1 u_1\) and \(v_1 u_2\) in \(\Gamma\).
        \item There are edges \(v_2 u_1\) and \(v_2 u_2\) in \(\Gamma\).
    \end{enumerate}
    In the second subcase if we apply Lemma \ref{lem:is_surface_Y} to \(\Gamma - \{u_1, u_3\}\),
    we see there must be an edge between \(v_1\) and \(u_4\) in \(\Gamma\).
    So, in this subcase, \(\Gamma\) must have \(\Theta_4\) as a subgraph.
    Suppose the first subcase is true, then applying Lemma \ref{lem:is_surface_Y} to \(\Gamma - \{u_2, u_3\}\),
    it follows that there is an edge between \(v_1\) and \(u_4\) in \(\Gamma\).
    Applying Lemma \ref{lem:is_surface_Y} to \(\Gamma - \{v_1, u_3\}\),
    we have two possibilities.
    \begin{enumerate}
        \item \(v_2\) is the center of the \(Y\)-graph \(\Gamma - \{v_1, u_3\}\).
        \item \(v_2\) is not the center of the \(Y\)-graph \(\Gamma - \{v_1, u_3\}\).
    \end{enumerate}
    If \(v_2\) is the center, then there must be edges \(v_2 u_1\), \(v_2, u_2\), \(v_2 u_4\) in \(\Gamma\).
    Putting particles at the vertices \(v_2\), \(u_2\), and \(u_4\), each of these particles can move
    simultaneously to \(u_1\), \(v_1\), and \(u_3\) respectively.
    This results in \((v_2, u_2, u_4)\) forming the corner of a \(3\)-cube in the configuration space
    contradicting that \(\DConf_3(\Gamma)\) is a surface.

    So, suppose that \(v_2\) is not the center of the \(Y\)-graph. Let \(u_i\) be the center of the \(Y\)-graph.
    Then, there must be an edge connecting \(v_2\) to \(u_i\).
    Putting particles at the vertices \(v_2\), \(u_j\), and \(u_k\) where \(j \neq i\) and \(k \neq i\),
    each of these particles can move simultaneously to \(u_i\), \(v_1\), and \(u_3\) respectively.
    Similarly this results in \((v_2, u_2, u_4)\) forming the corner of a \(3\)-cube in the configuration space.
    Therefore, \(\Gamma\) must have \(\Theta_4\) as a subgraph.

    It remains to show that \(\Gamma\) must equal \(\Theta_4\). Since \(\Gamma\) has \(\Theta_4\) as a subgraph
    if \(\Gamma\) is not \(\Theta_4\) this is equivalent to assuming there is at least one additional edge in \(\Theta_4\).
    So, if we just look at adding in one additional edge we have two possibilities (up to isomorphism).
    \begin{enumerate}
        \item There is an edge between \(v_2\) and \(u_3\).
        \item There is an edge between \(u_1\) and \(u_2\).
    \end{enumerate}
    In the second case, since \(\Gamma - \{u_1, u_2\}\) contains a \(4\)-cycle, Lemma \ref{lem:is_surface_Y} immediately fails.
    So suppose that there is an edge between \(v_2\) and \(u_4\).
    Applying Lemma \ref{lem:is_surface_Y} to \(\Gamma - \{v_2, u_4\}\), we see there must be additional edges to make \(\Gamma - \{v_2, u_3\}\)
    a \(Y\)-graph.
    There are two possibilities.
    \begin{enumerate}
        \item \(v_1\) is the center of the \(Y\)-graph \(\Gamma - \{v_2, u_3\}\).
        \item \(u_i\) is the center of the \(Y\)-graph \(\Gamma - \{v_2, u_3\}\) for some \(i \neq 3\).
    \end{enumerate}
    In either case there must be some edge connecting \(v_1\) to \(u_j\) for some \(j \neq 3\).
    Without a loss of generality suppose \(j = 1\).
    Then, immediately one can see that Lemma \ref{lem:is_surface_Y} fails for \(\Gamma - \{u_3, u_4\}\)
    as what remains contains a \(3\)-cycle.
    Therefore \(\Gamma\) must be \(\Theta_4\).
\end{proof}

\begin{thm}
    If \(\DConf_n(\Gamma)\) is a surface and \(n > 3\), then \(n = 4\) and \(\Gamma = K_{3,3}\).
\end{thm}
\begin{proof}
    Let \(v_1\) and \(v_2\) be adjacent vertices in \(\Gamma\).
    Since \(n > 3\), Lemma \ref{lem:is_surface_2} guarantees that \(\Gamma - \{v_1, v_2\}\) cannot be a \(Y\)-graph.
    So, \(\Gamma - \{v_1, v_2\}\) must be an \(n\)-cycle.
    Let \(u_1, u_2, \cdots, u_n\) be the vertices on the \(n\) cycle.
    Since \(\Gamma\) is connected there must be some edge connecting either \(v_1\) or \(v_2\) to some \(u_i\).
    Without a loss of generality suppose that \(v_1\) is connected to \(u_1\).
    If \(n > 4\) apply Lemma \ref{lem:is_surface_C} to \(\Gamma - \{v_1, u_1\}\) and see that
    \(u_2\) and \(u_n\) must connect to \(v_2\) in \(\Gamma\).
    Now put particles at each vertex in \(\{v_1, u_1, u_2, \cdots, u_n\}\setminus\{u_4\}\).
    As the particle at \(u_3\) moves to \(u_4\), any one of the particles at \(v_1\), \(u_2\), or \(u_n\) 
    can move to \(v_2\). These particles movements correspond to a book in the configuration space
    whose spine corresponds to the movement of the particle at \(u_3\) to \(u_4\).
    Therefore \(n\) must equal \(4\).
    See Figure \ref{fig:edge4cycle} for the current situation.
    Applying Lemma \ref{lem:is_surface_C} to \(\Gamma - \{v_1, u_1\}\), there must be an edges
    \(v_2 u_2\) and \(v_2 u_4\) in \(\Gamma\).
    Applying Lemma \ref{lem:is_surface_C} to \(\Gamma - \{v_2, u_2\}\), there must be an edge connecting \(v_1\)
    and \(u_2\).
    Therefore \(\Gamma\) must have \(K_{3,3}\) as a subgraph.

    Suppose that \(\Gamma\) was not \(K_{3,3}\).
    Then there is at least one additional edge.
    Without a loss of generality suppose this edge is \(u_2, u_4\).
    Then, \(\Gamma - \{v_1, u_3\}\) contains a \(3\)-cycle contradicting Lemma \ref{lem:is_surface_C}.
    Hence \(\Gamma\) must be \(K_{3,3}\).
    \begin{figure}[h!]
        \centering
        \begin{tikzpicture}
            \node (v1) at (0, 2) {\(v_1\)};
            \node (v2) at (0, 0) {\(v_2\)};
            \node (u1) at (3, 2) {\(u_1\)};
            \node (u2) at (2, 1) {\(u_2\)};
            \node (u4) at (4, 1) {\(u_4\)};
            \node (u3) at (3, 0) {\(u_3\)};
            \draw (v1) -- (v2);
            \draw (u1) -- (u2);
            \draw (u2) -- (u3);
            \draw (u3) -- (u4);
            \draw (u4) -- (u1);

            \draw (v1) -- (u1);
        \end{tikzpicture}
        \caption{Edge connected to \(4\)-cycle}
        \label{fig:edge4cycle}
    \end{figure}

    \begin{figure}
        \centering
        \begin{tikzpicture}
            \node (v1) at (0, 2) {\(v_1\)};
            \node (v2) at (0, 0) {\(v_2\)};
            \node (u1) at (3, 2) {\(u_1\)};
            \node (u2) at (2, 1) {\(u_2\)};
            \node (u4) at (4, 1) {\(u_4\)};
            \node (u3) at (3, 0) {\(u_3\)};
            \draw (v1) -- (v2);
            \draw (u1) -- (u2);
            \draw (u2) -- (u3);
            \draw (u3) -- (u4);
            \draw (u4) -- (u1);
            \draw (v1) -- (u1);
            \draw (v1) -- (u3);
            \draw (v2) -- (u2);
            \draw (v2) -- (u4);
        \end{tikzpicture}
        \label{fig:K3,3}
        \caption{\(K_{3,3}\)}
    \end{figure}

\end{proof}

